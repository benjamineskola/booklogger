{% from "macros.html" import author_list, format_date %}
<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Benâ€™s Read Books</title>
  <link href="http://booklogger.eskola.uk/" rel="alternate"></link>
  <link href="http://booklogger.eskola.uk/books/read.xml" rel="self"></link>
  <id>https://booklogger.eskola.uk/</id>
  <updated>{{ entries.first().end_date.isoformat() }}</updated>
  {% for entry in entries %}
    <entry>
      <title>Finished reading {{ entry.book.display_title }}</title>
      <link href="http://booklogger.eskola.uk{{ entry.book.get_absolute_url() }}" rel="alternate"/>
      {% if entry.book.image_url %}
        <link href="{{ entry.book.image_url }}" rel="enclosure" type="image/jpeg"/>
      {% endif %}
      <published>{{ entry.end_date.isoformat() }}</published>
      <updated>{{ entry.end_date.isoformat() }}</updated>
      <author><name>Benjamin Eskola</name></author>
      <id>tag:booklogger.eskola.uk,2020-11-27:{{ entry.end_date.strftime("%Y-%m-%d") }}/{{ entry.book.slug }}</id>
      <content type="html" xml:base="http://booklogger.eskola.uk/"><![CDATA[
        {% if entry.book.image_url %}
          <img src="{{ entry.book.image_url }}" rel="alternate"/>
          <br/><br/>
        {% endif %}
        Author{% if entry.book.authors | length > 1 %}s{% endif %}: {{ author_list(entry.book.all_authors, book=entry.book) }}<br/>
        Published: {{ entry.book.display_date }}<br/>
        Rating: {{ entry.book.rating }}<br/>
        Read at: {{ format_date(entry.end_date, entry.end_precision) }}<br/>
        {% if entry.book.acquired_date %}
          Date acquired: {{ format_date(entry.book.acquired_date, 0) }}<br/>
        {% endif %}
        Date added: {{ format_date(entry.book.created_date, 0) }}<br/>
        Tags: {{ entry.book.tags | oxford_comma }}<br/>
        Review: {{ entry.book.review | markdown }}
      ]]></content>
    </entry>
  {% endfor %}
</feed>
