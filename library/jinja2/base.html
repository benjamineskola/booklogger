{% set pages = [
('All', 'library:books_all'),
('Owned', 'library:books_owned'),
('By Date', 'library:books_owned_by_date'),
('Borrowed', 'library:books_borrowed'),
('Reading', 'library:books_currently_reading'),
('Read', 'library:books_read'),
('To Read', 'library:books_unread'),
('Wishlist', 'library:books_unowned'),
('Authors', 'library:author_list'),
('Tags', 'library:tag_cloud'),
('Stats', 'library:stats')
]%}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="mobile-web-app-capable" content="yes">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ static("style.css") }}">
    <title>{% if page_title %}{{ page_title }} — {% endif %}Booklogger</title>
  </head>
  <body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <a class="navbar-brand" href="{{ url('library:index')  }}">Booklogger</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
    <div class="navbar-nav mr-auto">
    {% for page in pages %}
    <a class="nav-item nav-link{% if page[1] == request.resolver_match.url_name %} active{% endif %}" href="{{url(page[1])}}">{{ page[0] }}{% if page[1] == request.resolver_match.url_name %}<span class="sr-only">(current)</span></a>{% endif %}</a>
    {% endfor %}
    </div>
    <form class="form-inline my-2 my-lg-0" action="{{url('library:basic_search')}}">
      <input class="form-control-sm mr-sm-2" type="search" placeholder="Search" aria-label="Search" name="query">
    </form>
    <div class="navbar-nav">
    {% if user.is_authenticated %}
      <div class="dropdown">
        <a class="dropdown-toggle" id="admin-dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Admin
        </a>
        <div class="dropdown-menu" aria-labelledby="admin-dropdown">
          <a class="dropdown-item" href="{{ url('admin:index') }}">Admin</a>
          <a class="dropdown-item" href="{{ url('admin:library_book_add') }}">Create</a>
          <a class="dropdown-item" href="{{ url('library:book_import') }}">Import</a>
        </div>
      </div>
    {% else %}
      <a class="nav-item nav-link" href="{{ url('admin:login') }}?next={{ request.get_full_path () }}">Log In</a>
    {% endif %}
    </div>

  </div>
</nav>
    <main role="main" class="flex-shrink-0">
      <div class="container mb-4">
        {% if page_title and request.resolver_match.url_name != 'book_details' %}
          <h1 class="mt-5">
          {{ page_title }}
          </h1>
        {% endif %}
        {% block content %}
	{% endblock %}
      </div>
    </main>

    {% if page_obj  and page_obj.paginator.num_pages > 1 %}
    {% set params = request.GET.copy() %}
    {% if 'page' in params %}
    {% set ignored = params.pop('page') %}
    {% endif %}
    {% set qs = params.urlencode() %}

    <nav class="pagination pagination-sm container justify-content-center">
        <ul class="pagination">
          {% if page_obj.number > 1 %}
          <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number() }}&{{qs}}">&laquo;</a></li>
          {% else %}
          <li class="page-item"><span class="page-link">&laquo;</a></li>
          {% endif %}

          {% for pageno in page_obj.paginator.page_range %}
            {% if page_obj.paginator.num_pages < 10 or pageno == 1 or pageno == page_obj.paginator.num_pages or (pageno > page_obj.number - 2 and pageno < page_obj.number +2) %}
              <li class="page-item{% if pageno == page_obj.number %} active{% endif %}"><a class="page-link" href="?page={{ pageno }}&{{qs}}">{{pageno}}</a></li>
            {% elif pageno == page_obj.number - 2 or pageno == page_obj.number + 2 %}
              <li class="page-item inactive"><span class="page-link">…</span></li>
            {% endif %}
          {% endfor %}

          {% if page_obj.number < page_obj.paginator.num_pages %}
            <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number() }}&{{qs}}">&raquo;</a></li>
          {% else %}
            <li class="page-item"><span class="page-link">&raquo;</a></li>
          {% endif %}
        </ul>
    </nav>
    {% endif %}

    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js" integrity="sha384-6khuMg9gaYr5AxOqhkVIODVIvm9ynTT5J4V1cfthmT+emCG6yVmEZsRHdxlotUnm" crossorigin="anonymous"></script>
  </body>
</html>
