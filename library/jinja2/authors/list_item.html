{% from "macros.html" import author_link, author_list with context %}
<li>
  <span class="header">{{ author_link(author) }}</span>
  <span class="meta">
    {%- if author.authored_books.count() > 0 -%}
      Author of {{ author.authored_books.first().display_title }}
    {%- elif author.edited_books.count() > 0 -%}
      Editor of {{ author.edited_books.first().display_title }}
    {%- else -%}
      Contributor to {{ author.books.first().display_title }}
    {%- endif %}
    {%- if author.books.count() > 1 %}
      and {{ author.books.count() -1 }} other
      {%- if author.books.count() > 2 %}s{% endif %}
    {%- endif %}.
    {% if author.identities %}Also writes as {{ author_list(author.identities, full=True) }}.{% endif %}
    {% if author.primary_language != "en" %}(writes in {{ author.get_primary_language_display() }}){% endif %}
  </span>
</li>
