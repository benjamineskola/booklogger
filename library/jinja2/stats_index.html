{% extends "base.html" %}
{% block content %}
  <p>
    In total I own {{ owned | intcomma }} books and have read {{ owned_read | intcomma }} ({{ owned_read_pct | round_trunc(2) }}%) of them, plus {{ unowned_read | intcomma }} that I don't own. I <a href="{{ url("library:books_to_read") }}">want to read</a> {{ want_to_read | intcomma }} ({{ want_to_read_pct | round_trunc(2) }}%) of them, including <a href="{{ url("library:books_to_read") }}?read=true&owned=true">rereading</a> {{ reread | intcomma }} ({{ reread_pct | round_trunc(2) }}%) of them.
  </p>

  <div id="stats-total" class="stats-for-year" data-year="total">
    <div id="loading-stats" class="spinner-grow mb-4" role="status">
      <span class="sr-only">Loading...</span>
    </div>
  </div>

  {% for year in years | sort | reverse %}
    {% if year == "1" %}
      {% set year = "sometime" %}
    {% endif %}
    <div id="stats-{{ year }}" class="stats-for-year" data-year="{{ year }}">
      <div id="loading-stats-{{ year }}" class="spinner-grow mb-4" role="status" style="display: none;">
        <span class="sr-only">Loading...</span>
      </div>
    </div>
  {% endfor %}
{% endblock %}

{% block footer %}
  <script type="module">
    import { StatsLoader } from "/static/stats_loader.js";
    let statsLoader = new StatsLoader();
    statsLoader.init();
  </script>
{% endblock footer %}
